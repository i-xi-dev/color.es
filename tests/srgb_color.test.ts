import { assertStrictEquals, assertThrows } from "./deps.ts";
import { SRgbColor } from "../mod.ts";

Deno.test("SRgbColor.prototype.r", () => {
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 1000, g: 0, b: 0 }).r, 1);
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 256, g: 0, b: 0 }).r, 1);
  for (let i = 0; i <= 255; i++) {
    assertStrictEquals(SRgbColor.fromRgbBytes({ r: i, g: 0, b: 0 }).r, i / 255);
  }
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: -1, g: 0, b: 0 }).r, 0);
});

Deno.test("SRgbColor.prototype.g", () => {
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 1000, b: 0 }).g, 1);
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 256, b: 0 }).g, 1);
  for (let i = 0; i <= 255; i++) {
    assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: i, b: 0 }).g, i / 255);
  }
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: -1, b: 0 }).g, 0);
});

Deno.test("SRgbColor.prototype.b", () => {
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: 1000 }).b, 1);
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: 256 }).b, 1);
  for (let i = 0; i <= 255; i++) {
    assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: i }).b, i / 255);
  }
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: -1 }).b, 0);
});

Deno.test("SRgbColor.prototype.rByte", () => {
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 1000, g: 0, b: 0 }).rByte, 255);
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 256, g: 0, b: 0 }).rByte, 255);
  for (let i = 0; i <= 255; i++) {
    assertStrictEquals(SRgbColor.fromRgbBytes({ r: i, g: 0, b: 0 }).rByte, i);
  }
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: -1, g: 0, b: 0 }).rByte, 0);
});

Deno.test("SRgbColor.prototype.gByte", () => {
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 1000, b: 0 }).gByte, 255);
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 256, b: 0 }).gByte, 255);
  for (let i = 0; i <= 255; i++) {
    assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: i, b: 0 }).gByte, i);
  }
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: -1, b: 0 }).gByte, 0);
});

Deno.test("SRgbColor.prototype.bByte", () => {
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: 1000 }).bByte, 255);
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: 256 }).bByte, 255);
  for (let i = 0; i <= 255; i++) {
    assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: i }).bByte, i);
  }
  assertStrictEquals(SRgbColor.fromRgbBytes({ r: 0, g: 0, b: -1 }).bByte, 0);
});

Deno.test("SRgbColor.prototype.toHsl()", () => {
  const cases = [
    /* ChromeのF12から */
    { r: 0, h: "0.00", s: "0.00", l: "0.00" },
    //{ r: 5, h: "0.00", s: "0.00", l: "0.01"/*0.98*/ }, chromeのF12だとこれは彩度0。なんで？ firefoxのF12は形式変換できないのでわからんが赤のところにカーソルあるから多分1
    { r: 6, h: "0.00", s: "1.00", l: "0.01"/*1.18*/ },
    // { r: 7, h: "0.00", s: "1.00", l: "0.01"/*1.37*/ },
    // { r: 8, h: "0.00", s: "1.00", l: "0.02"/*1.57*/ },
    // { r: 9, h: "0.00", s: "1.00", l: "0.02"/*1.76*/ },
    // { r: 10, h: "0.00", s: "1.00", l: "0.02"/*1.96*/ },
    // { r: 11, h: "0.00", s: "1.00", l: "0.02"/*2.16*/ },
    // { r: 12, h: "0.00", s: "1.00", l: "0.02"/*2.35*/ },
    // { r: 13, h: "0.00", s: "1.00", l: "0.03"/*2.55*/ },
    // { r: 14, h: "0.00", s: "1.00", l: "0.03"/*2.75*/ },
    // { r: 15, h: "0.00", s: "1.00", l: "0.03"/*2.94*/ },
    // { r: 16, h: "0.00", s: "1.00", l: "0.03"/*3.14*/ },
    // { r: 17, h: "0.00", s: "1.00", l: "0.03"/*3.33*/ },
    // { r: 18, h: "0.00", s: "1.00", l: "0.04"/*3.53*/ },
    // { r: 19, h: "0.00", s: "1.00", l: "0.04"/*3.73*/ },
    // { r: 20, h: "0.00", s: "1.00", l: "0.04"/*3.92*/ },
    // { r: 21, h: "0.00", s: "1.00", l: "0.04"/*4.12*/ },
    // { r: 22, h: "0.00", s: "1.00", l: "0.04"/*4.31*/ },
    // { r: 23, h: "0.00", s: "1.00", l: "0.05"/*4.51*/ },
    // { r: 24, h: "0.00", s: "1.00", l: "0.05"/*4.71*/ },
    // { r: 25, h: "0.00", s: "1.00", l: "0.05"/*4.90*/ },
    // { r: 26, h: "0.00", s: "1.00", l: "0.05"/*5.10*/ },
    // { r: 27, h: "0.00", s: "1.00", l: "0.05"/*5.29*/ },
    // { r: 28, h: "0.00", s: "1.00", l: "0.05"/*5.49*/ },
    // { r: 29, h: "0.00", s: "1.00", l: "0.06"/*5.69*/ },
    // { r: 30, h: "0.00", s: "1.00", l: "0.06"/*5.88*/ },
    // { r: 31, h: "0.00", s: "1.00", l: "0.06"/*6.08*/ },
    // { r: 32, h: "0.00", s: "1.00", l: "0.06"/*6.27*/ },
    // { r: 33, h: "0.00", s: "1.00", l: "0.06"/*6.47*/ },
    // { r: 34, h: "0.00", s: "1.00", l: "0.07"/*6.67*/ },
    // { r: 35, h: "0.00", s: "1.00", l: "0.07"/*6.86*/ },
    // { r: 36, h: "0.00", s: "1.00", l: "0.07"/*7.06*/ },
    // { r: 37, h: "0.00", s: "1.00", l: "0.07"/*7.25*/ },
    // { r: 38, h: "0.00", s: "1.00", l: "0.07"/*7.45*/ },
    // { r: 39, h: "0.00", s: "1.00", l: "0.08"/*7.65*/ },
    // { r: 40, h: "0.00", s: "1.00", l: "0.08"/*7.84*/ },
    // { r: 41, h: "0.00", s: "1.00", l: "0.08"/*8.04*/ },
    // { r: 42, h: "0.00", s: "1.00", l: "0.08"/*8.24*/ },
    // { r: 43, h: "0.00", s: "1.00", l: "0.08"/*8.43*/ },
    // { r: 44, h: "0.00", s: "1.00", l: "0.09"/*8.63*/ },
    // { r: 45, h: "0.00", s: "1.00", l: "0.09"/*8.82*/ },
    // { r: 46, h: "0.00", s: "1.00", l: "0.09"/*9.02*/ },
    // { r: 47, h: "0.00", s: "1.00", l: "0.09"/*9.22*/ },
    // { r: 48, h: "0.00", s: "1.00", l: "0.09"/*9.41*/ },
    // { r: 49, h: "0.00", s: "1.00", l: "0.10"/*9.61*/ },
    // { r: 50, h: "0.00", s: "1.00", l: "0.10"/*9.80*/ },
    // { r: 51, h: "0.00", s: "1.00", l: "0.10"/*10.00*/ },
    // { r: 52, h: "0.00", s: "1.00", l: "0.10"/*10.20*/ },
    // { r: 53, h: "0.00", s: "1.00", l: "0.10"/*10.39*/ },
    // { r: 54, h: "0.00", s: "1.00", l: "0.11"/*10.59*/ },
    // { r: 55, h: "0.00", s: "1.00", l: "0.11"/*10.78*/ },
    // { r: 56, h: "0.00", s: "1.00", l: "0.11"/*10.98*/ },
    // { r: 57, h: "0.00", s: "1.00", l: "0.11"/*11.18*/ },
    // { r: 58, h: "0.00", s: "1.00", l: "0.11"/*11.37*/ },
    // { r: 59, h: "0.00", s: "1.00", l: "0.12"/*11.57*/ },
    // { r: 60, h: "0.00", s: "1.00", l: "0.12"/*11.76*/ },
    // { r: 61, h: "0.00", s: "1.00", l: "0.12"/*11.96*/ },
    // { r: 62, h: "0.00", s: "1.00", l: "0.12"/*12.16*/ },
    // { r: 63, h: "0.00", s: "1.00", l: "0.12"/*12.35*/ },
    // { r: 64, h: "0.00", s: "1.00", l: "0.13"/*12.55*/ },
    // { r: 65, h: "0.00", s: "1.00", l: "0.13"/*12.75*/ },
    // { r: 66, h: "0.00", s: "1.00", l: "0.13"/*12.94*/ },
    // { r: 67, h: "0.00", s: "1.00", l: "0.13"/*13.14*/ },
    // { r: 68, h: "0.00", s: "1.00", l: "0.13"/*13.33*/ },
    // { r: 69, h: "0.00", s: "1.00", l: "0.14"/*13.53*/ },
    // { r: 70, h: "0.00", s: "1.00", l: "0.14"/*13.73*/ },
    // { r: 71, h: "0.00", s: "1.00", l: "0.14"/*13.92*/ },
    // { r: 72, h: "0.00", s: "1.00", l: "0.14"/*14.12*/ },
    // { r: 73, h: "0.00", s: "1.00", l: "0.14"/*14.31*/ },
    // { r: 74, h: "0.00", s: "1.00", l: "0.15"/*14.51*/ },
    // { r: 75, h: "0.00", s: "1.00", l: "0.15"/*14.71*/ },
    // { r: 76, h: "0.00", s: "1.00", l: "0.15"/*14.90*/ },
    // { r: 77, h: "0.00", s: "1.00", l: "0.15"/*15.10*/ },
    // { r: 78, h: "0.00", s: "1.00", l: "0.15"/*15.29*/ },
    // { r: 79, h: "0.00", s: "1.00", l: "0.15"/*15.49*/ },
    // { r: 80, h: "0.00", s: "1.00", l: "0.16"/*15.69*/ },
    // { r: 81, h: "0.00", s: "1.00", l: "0.16"/*15.88*/ },
    // { r: 82, h: "0.00", s: "1.00", l: "0.16"/*16.08*/ },
    // { r: 83, h: "0.00", s: "1.00", l: "0.16"/*16.27*/ },
    // { r: 84, h: "0.00", s: "1.00", l: "0.16"/*16.47*/ },
    // { r: 85, h: "0.00", s: "1.00", l: "0.17"/*16.67*/ },
    // { r: 86, h: "0.00", s: "1.00", l: "0.17"/*16.86*/ },
    // { r: 87, h: "0.00", s: "1.00", l: "0.17"/*17.06*/ },
    // { r: 88, h: "0.00", s: "1.00", l: "0.17"/*17.25*/ },
    // { r: 89, h: "0.00", s: "1.00", l: "0.17"/*17.45*/ },
    // { r: 90, h: "0.00", s: "1.00", l: "0.18"/*17.65*/ },
    // { r: 91, h: "0.00", s: "1.00", l: "0.18"/*17.84*/ },
    // { r: 92, h: "0.00", s: "1.00", l: "0.18"/*18.04*/ },
    // { r: 93, h: "0.00", s: "1.00", l: "0.18"/*18.24*/ },
    // { r: 94, h: "0.00", s: "1.00", l: "0.18"/*18.43*/ },
    // { r: 95, h: "0.00", s: "1.00", l: "0.19"/*18.63*/ },
    // { r: 96, h: "0.00", s: "1.00", l: "0.19"/*18.82*/ },
    // { r: 97, h: "0.00", s: "1.00", l: "0.19"/*19.02*/ },
    // { r: 98, h: "0.00", s: "1.00", l: "0.19"/*19.22*/ },
    // { r: 99, h: "0.00", s: "1.00", l: "0.19"/*19.41*/ },
    // { r: 100, h: "0.00", s: "1.00", l: "0.20"/*19.61*/ },
    // { r: 101, h: "0.00", s: "1.00", l: "0.20"/*19.80*/ },
    // { r: 102, h: "0.00", s: "1.00", l: "0.20"/*20.00*/ },
    // { r: 103, h: "0.00", s: "1.00", l: "0.20"/*20.20*/ },
    // { r: 104, h: "0.00", s: "1.00", l: "0.20"/*20.39*/ },
    // { r: 105, h: "0.00", s: "1.00", l: "0.21"/*20.59*/ },
    // { r: 106, h: "0.00", s: "1.00", l: "0.21"/*20.78*/ },
    // { r: 107, h: "0.00", s: "1.00", l: "0.21"/*20.98*/ },
    // { r: 108, h: "0.00", s: "1.00", l: "0.21"/*21.18*/ },
    // { r: 109, h: "0.00", s: "1.00", l: "0.21"/*21.37*/ },
    // { r: 110, h: "0.00", s: "1.00", l: "0.22"/*21.57*/ },
    // { r: 111, h: "0.00", s: "1.00", l: "0.22"/*21.76*/ },
    // { r: 112, h: "0.00", s: "1.00", l: "0.22"/*21.96*/ },
    // { r: 113, h: "0.00", s: "1.00", l: "0.22"/*22.16*/ },
    // { r: 114, h: "0.00", s: "1.00", l: "0.22"/*22.35*/ },
    // { r: 115, h: "0.00", s: "1.00", l: "0.23"/*22.55*/ },
    // { r: 116, h: "0.00", s: "1.00", l: "0.23"/*22.75*/ },
    // { r: 117, h: "0.00", s: "1.00", l: "0.23"/*22.94*/ },
    // { r: 118, h: "0.00", s: "1.00", l: "0.23"/*23.14*/ },
    // { r: 119, h: "0.00", s: "1.00", l: "0.23"/*23.33*/ },
    // { r: 120, h: "0.00", s: "1.00", l: "0.24"/*23.53*/ },
    // { r: 121, h: "0.00", s: "1.00", l: "0.24"/*23.73*/ },
    // { r: 122, h: "0.00", s: "1.00", l: "0.24"/*23.92*/ },
    // { r: 123, h: "0.00", s: "1.00", l: "0.24"/*24.12*/ },
    // { r: 124, h: "0.00", s: "1.00", l: "0.24"/*24.31*/ },
    // { r: 125, h: "0.00", s: "1.00", l: "0.25"/*24.51*/ },
    // { r: 126, h: "0.00", s: "1.00", l: "0.25"/*24.71*/ },
    // { r: 127, h: "0.00", s: "1.00", l: "0.25"/*24.90*/ },
    // { r: 128, h: "0.00", s: "1.00", l: "0.25"/*25.10*/ },
    // { r: 129, h: "0.00", s: "1.00", l: "0.25"/*25.29*/ },
    // { r: 130, h: "0.00", s: "1.00", l: "0.25"/*25.49*/ },
    // { r: 131, h: "0.00", s: "1.00", l: "0.26"/*25.69*/ },
    // { r: 132, h: "0.00", s: "1.00", l: "0.26"/*25.88*/ },
    // { r: 133, h: "0.00", s: "1.00", l: "0.26"/*26.08*/ },
    // { r: 134, h: "0.00", s: "1.00", l: "0.26"/*26.27*/ },
    // { r: 135, h: "0.00", s: "1.00", l: "0.26"/*26.47*/ },
    // { r: 136, h: "0.00", s: "1.00", l: "0.27"/*26.67*/ },
    // { r: 137, h: "0.00", s: "1.00", l: "0.27"/*26.86*/ },
    // { r: 138, h: "0.00", s: "1.00", l: "0.27"/*27.06*/ },
    // { r: 139, h: "0.00", s: "1.00", l: "0.27"/*27.25*/ },
    // { r: 140, h: "0.00", s: "1.00", l: "0.27"/*27.45*/ },
    // { r: 141, h: "0.00", s: "1.00", l: "0.28"/*27.65*/ },
    // { r: 142, h: "0.00", s: "1.00", l: "0.28"/*27.84*/ },
    // { r: 143, h: "0.00", s: "1.00", l: "0.28"/*28.04*/ },
    // { r: 144, h: "0.00", s: "1.00", l: "0.28"/*28.24*/ },
    // { r: 145, h: "0.00", s: "1.00", l: "0.28"/*28.43*/ },
    // { r: 146, h: "0.00", s: "1.00", l: "0.29"/*28.63*/ },
    // { r: 147, h: "0.00", s: "1.00", l: "0.29"/*28.82*/ },
    // { r: 148, h: "0.00", s: "1.00", l: "0.29"/*29.02*/ },
    // { r: 149, h: "0.00", s: "1.00", l: "0.29"/*29.22*/ },
    // { r: 150, h: "0.00", s: "1.00", l: "0.29"/*29.41*/ },
    // { r: 151, h: "0.00", s: "1.00", l: "0.30"/*29.61*/ },
    // { r: 152, h: "0.00", s: "1.00", l: "0.30"/*29.80*/ },
    // { r: 153, h: "0.00", s: "1.00", l: "0.30"/*30.00*/ },
    // { r: 154, h: "0.00", s: "1.00", l: "0.30"/*30.20*/ },
    // { r: 155, h: "0.00", s: "1.00", l: "0.30"/*30.39*/ },
    // { r: 156, h: "0.00", s: "1.00", l: "0.31"/*30.59*/ },
    // { r: 157, h: "0.00", s: "1.00", l: "0.31"/*30.78*/ },
    // { r: 158, h: "0.00", s: "1.00", l: "0.31"/*30.98*/ },
    { r: 159, h: "0.00", s: "1.00", l: "0.31"/*31.18*/ },
   // { r: , h: "0.00", s: "1.00", l: "0."/*.*/ },

    { r: 200, h: "0.00", s: "1.00", l: "0.39"/*39.22*/ },

    { r: 255, h: "0.00", s: "1.00", l: "0.50" },
  ];

  for (const c of cases) {
    const hsl = SRgbColor.fromRgbBytes({ r: c.r, g: 0, b: 0 }).toHsl();
    console.log(hsl)
    assertStrictEquals(hsl.h.toFixed(2), c.h);
    assertStrictEquals(hsl.s.toFixed(2), c.s);
    assertStrictEquals(hsl.l.toFixed(2), c.l);
  }
});
